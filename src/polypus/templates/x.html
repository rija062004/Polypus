
<!DOCTYPE html>
<html lang="en">
{% load static %}
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
        <title>{% block titre %} Acceuil | Polypus Corporation S.A {% endblock %}</title>

      <!-- Favicons - Place favicon.ico in the root directory -->
        <link rel="apple-touch-icon" sizes="57x57" href="{% static 'assets/img/favicons/apple-icon-57x57.png' %}">
        <link rel="apple-touch-icon" sizes="60x60" href="{% static 'assets/img/favicons/apple-icon-60x60.png' %}">
        <link rel="apple-touch-icon" sizes="72x72" href="{% static 'assets/img/favicons/apple-icon-72x72.png' %}">
        <link rel="apple-touch-icon" sizes="76x76" href="{% static 'assets/img/favicons/apple-icon-76x76.png' %}">
        <link rel="apple-touch-icon" sizes="114x114" href="{% static 'assets/img/favicons/apple-icon-114x114.png' %}">
        <link rel="apple-touch-icon" sizes="120x120" href="{% static 'assets/img/favicons/apple-icon-120x120.png' %}">
        <link rel="apple-touch-icon" sizes="144x144" href="{% static 'assets/img/favicons/apple-icon-144x144.png' %}">
        <link rel="apple-touch-icon" sizes="152x152" href="{% static 'assets/img/favicons/apple-icon-152x152.png' %}">
        <link rel="apple-touch-icon" sizes="180x180" href="{% static 'assets/img/favicons/apple-icon-180x180.png' %}">
        <link rel="icon" type="image/png" sizes="192x192" href="{% static 'assets/img/favicons/android-icon-192x192.png' %}">
        <link rel="icon" type="image/png" sizes="32x32" href="{% static 'assets/img/favicons/favicon-32x32.png' %}">
        <link rel="icon" type="image/png" sizes="96x96" href="{% static 'assets/img/favicons/favicon-96x96.png' %}">
        <link rel="icon" type="image/png" sizes="16x16" href="{% static 'assets/img/favicons/favicon-16x16.png' %}">
        <link rel="manifest" href="{% static 'assets/img/favicons/manifest.json' %}">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="{% static 'assets/img/favicons/ms-icon-144x144.png' %}">
        <meta name="theme-color" content="#ffffff">
	    <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
	    <!----css3---->
        <link rel="stylesheet" href="{% static 'css/custom.css' %}">
      <link rel="stylesheet" href="{% static 'css/jquery-ui.min.css' %}">
      <link rel="stylesheet" href="{% static 'css/style2.css' %}">
		<!--google fonts -->
	    <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
	   <!--google material icon-->
      <link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">
      <!-- SweetAlert CSS -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <!-- SweetAlert JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
    .cursor-dot{
    display: block;
width: 30px;
height: 30px;
border: 2px solid black;
box-sizing: border-box;
}

.cursor-outline{
    display: block;
    width: 100px;
    height: 100px;
    border: 2px hsla(0, 90%, 23%, 0.5)
}

.cursor-dot,
.cursor-outline{
    position: fixed;
    top: 0;
    left: 0;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    z-index: 99999;
    pointer-events: none;
}
</style>
  </head>
  <body>
  <div class="cursor-dot" data-cursor-dot></div>
  <div class="cursor-outline" data-cursor-outline></div>
    <div class="wrapper">
      <div class="body-overlay"></div>
      <!-------------------------sidebar------------>
      <!-- Sidebar  -->
      {% include "./nav-bar.html" %}
      <!--------page-content---------------->
      <div id="content">
        <!--top--navbar----design--------->

        <div class="top-navbar">
  <div class="xp-topbar">
    <!-- Start XP Row -->
    <div class="row d-flex justify-content-between">
  <!-- Start XP Col -->
  <div class="col-1 col-md-1 col-lg-1 order-2 order-md-1 align-self-center">
    <div class="xp-menubar">
      <span class="material-icons text-white">signal_cellular_alt</span>
    </div>
  </div>
  <!-- End XP Col -->

  <!-- Start XP Col -->
  <div class="order-4 order-md-3 ml-md-auto d-flex">
    <!-- Search bar -->
    {% block recherche %}
    {% endblock %}

    <ul class="navbar-nav">
  <li class="nav-item dropdown">
    <a class="nav-link text-white btn" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <i class="material-icons">more_vert</i>
    </a>
    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown" style="background-color: #dce1e3; transition: all 0.3s ease-in-out;">

      <!-- User info with icon -->
      <div class="d-flex align-items-center p-3" style="background-color: #f1f1f1; border-bottom: 1px solid #ddd;">
        <i class="material-icons" style="font-size: 2rem; color: #333;">account_circle</i>
        <div class="ml-2">
          <strong>{{ user.first_name }} {{ user.last_name }}</strong>
        </div>
      </div>

      <!-- Dropdown options -->
      <a class="dropdown-item d-flex align-items-center" href="{% url 'logout' %}" style="transition: all 0.2s;">
        <i class="material-icons m-2" style="color: #f44336;">logout</i>Déconnexion
      </a>

      <a class="dropdown-item d-flex align-items-center" href="{% url 'ChangePassword' %}" style="transition: all 0.2s;">
        <i class="material-icons m-2" style="color: #ffc107;">password</i> Modifier le mot de passe
      </a>

      <a class="dropdown-item d-flex align-items-center" href="{% url 'register' %}" style="transition: all 0.2s;">
        <i class="material-icons m-2" style="color: #4caf50;">add_circle</i> Créer un autre administrateur
      </a>

      <a class="dropdown-item d-flex align-items-center" href="{% url 'listUser' %}" style="transition: all 0.2s;">
        <i class="material-icons m-2" style="color: #2196f3;">list</i> Liste des administrateurs
      </a>
    </div>
  </li>
</ul>

  </div>
</div>
  </div>
            <!-- End XP Row -->
  <div class="xp-breadcrumbbar text-center">
    <h1 class="page-title">{% block grand_titre %} Polypus Corporation S.A {% endblock %}</h1>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="#">Tableau de bord</a></li>
    </ol>
  </div>
</div>

        <!--------main-content------------->
        <div class="main-content">

          <div class="row">
            <div class="col-md-12">
              {% block contenu %}
              <!-- Page d'acceuil Ajoute des boutons, image, .... pour rendre la page d'acceuil attirant-->
                <div class="container">
    <h1 class="text-center mt-5">Bienvenue sur la Page d'Administration de <span class="text-primary">Polypus Corporation S.A</span></h1>
    <p class="text-center lead">Accédez rapidement aux fonctionnalités d'administration avec un design moderne et intuitif.</p>

    <!-- Hero Section with Background Image -->
    <div class="hero-section mt-5" style="background: url('{% static "assets/img/background.jpg" %}') no-repeat center center; background-size: cover; padding: 100px 0; border-radius: 10px;">
        <div class="text-center text-white">
            <h2 class="display-4 font-weight-bold">Simplifiez votre Gestion</h2>
            <p class="lead">Des outils puissants à portée de main pour une administration efficace.</p>
            <a href="{% url 'listEmployer' %}" class="btn btn-primary btn-lg mt-4">Démarrer</a>
        </div>
    </div>

    <!-- Features Section -->
<div class="features-section mt-5">
    <div class="row text-center">
        <div class="col-md-4">
            <i class="material-icons" style="font-size: 3rem; color: #4caf50;">dashboard</i>
            <h4 class="mt-3">Tableau de Bord</h4>
            <p>Vue d'ensemble complète des opérations en cours.</p>
        </div>
        <div class="col-md-4">
            <i class="material-icons" style="font-size: 3rem; color: #2196f3;">groups</i>
            <h4 class="mt-3">Employeurs</h4>
            <p>Gestion complète des employeurs et du personnel.</p>
        </div>
        <div class="col-md-4">
            <i class="material-icons" style="font-size: 3rem; color: #ff9800;">person</i>
            <h4 class="mt-3">Clients</h4>
            <p>Visualisez et gérez la liste des clients.</p>
        </div>
    </div>

    <div class="row text-center mt-5">
        <div class="col-md-4">
            <i class="material-icons" style="font-size: 3rem; color: #8e44ad;">location_on</i>
            <h4 class="mt-3">Villes Disponibles</h4>
            <p>Liste et gestion des villes où des résidences sont disponibles.</p>
        </div>
        <div class="col-md-4">
            <i class="material-icons" style="font-size: 3rem; color: #e67e22;">apartment</i>
            <h4 class="mt-3">Modèles de Villas</h4>
            <p>Gestion des différents modèles de villas proposés.</p>
        </div>
        <div class="col-md-4">
            <i class="material-icons" style="font-size: 3rem; color: #2980b9;">map</i>
            <h4 class="mt-3">Résidences Actuelles</h4>
            <p>Suivez et gérez les résidences en cours de location.</p>
        </div>
    </div>

    <div class="row text-center mt-5">
        <div class="col-md-4">
            <i class="material-icons" style="font-size: 3rem; color: #27ae60;">location_city</i>
            <h4 class="mt-3">Villas Disponibles</h4>
            <p>Découvrez les villas prêtes à être réservées.</p>
        </div>
        <div class="col-md-4">
            <i class="material-icons" style="font-size: 3rem; color: #c0392b;">image</i>
            <h4 class="mt-3">Images des Villas</h4>
            <p>Visualisez les galeries d'images des villas.</p>
        </div>
        <div class="col-md-4">
            <i class="material-icons" style="font-size: 3rem; color: #3498db;">date_range</i>
            <h4 class="mt-3">Réservations</h4>
            <p>Gérez les réservations de villas en toute simplicité.</p>
        </div>
    </div>
</div>
    <!-- CTA Section -->
</div>

              <div>
                  {{ visit }}
                  <canvas id="visitsChart" width="100px" height="100px"></canvas>
              </div>


              {% endblock %}

            </div>
          </div>
        </div>
        <!-- FOOTER -->
         {% include "./footer.html" %}
      </div>
    </div>
    <!----------html code complete----------->
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="{% static 'js/jquery-3.3.1.slim.min.js' %}"></script>
    <script src="{% static 'js/jquery-ui.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'js/sweetalert2.all.min.js' %}"></script>
    <script src="{% static 'js/chart.js' %}"></script>

    <script type="text/javascript">
      $(document).ready(function () {
        $(".xp-menubar").on("click", function () {
          $("#sidebar").toggleClass("active");
          $("#content").toggleClass("active");
        });

        $(".xp-menubar,.body-overlay").on("click", function () {
          $("#sidebar,.body-overlay").toggleClass("show-nav");
        });

        // Valeur du villa dans la formulaire de reservation changer
        $("#id_villaReserver").change(function () {
          var villaId = $(this).val(); // Récupère la valeur sélectionnée dans le select

          if (villaId) {
            $.ajax({
              url: '{% url "get_lots" %}', // Assurez-vous que l'URL correspond à la vue Django
              data: {
                villa_id: villaId, // Envoie l'ID de la villa sélectionnée
              },
              success: function (data) {
                console.log("Réponse de la vue:", data); // Log des données reçues
                $("#id_lotReserver").empty(); // Vide le select des lots
                $.each(data.lots, function (index, lot) {
                  $("#id_lotReserver").append(
                    '<option value="' +
                      lot.lotVilla +
                      '">' +
                      lot.lotVilla +
                      "</option>"
                  );
                });
              },
              error: function (xhr, status, error) {
                console.error(
                  "Erreur lors de la récupération des lots:",
                  error
                );
              },
            });
          } else {
            // Si aucune villa n'est sélectionnée, vider le select des lots
            $("#id_lotReserver").empty();
            $("#id_lotReserver").append('<option value="">---------------</option>');
          }
        });

      });


    </script>
  <script>
      // script for cursor
    const cursorDot = document.querySelector("[data-cursor-dot]");
      const cursorOutline = document.querySelector("[data-cursor-outline]");
      window.addEventListener("mousemove", function(e){

        const posX = e.clientX
        const posY = e.clientY

        cursorDot.style.left = `${posX}px`;
        cursorDot.style.top = `${posY}px`;

        cursorDot.animate({
            left : `${posX}px`,
            top : `${posY}px`,
        },  {duration: 1000, fill: 'forwards'});

      })
      window.addEventListener("focusin", function(e){

const posX = e.clientX
const posY = e.clientY
console.log(posX);

cursorDot.style.left = `${posX}px`;
cursorDot.style.top = `${posY}px`;

//cursorOutline.style.left = `${posX}px`;
//cursorOutline.style.top = `${posY}px`;

cursorOutline.animate({
    left : `${posX}px`,
    top : `${posY}px`,
},  {duration: 5000, fill: 'forwards'});

})

      // Récupérer les données de visites et dates du contexte Django
        const dates = {{ dates|safe }};
        const visitsCounts = {{ visits_counts|safe }};
        const mail = 2;

        // Configuration du graphique
        const ctx = document.getElementById('visitsChart').getContext('2d');
        const visitsChart = new Chart(ctx, {
    type: 'pie',
    data: {
        labels: dates,
        datasets: [{
            label: ['Nombre de Visites', 'Mail'],
            data: [visitsCounts, mail],
            backgroundColor:['rgba(255, 99, 132, 1)', 'rgba(1, 155, 132, 1)'],
            borderColor:'rgba(255, 99, 132, 1)',
            borderWidth: 1
        }
      ]
    },
    options: {
        responsive: true,  // Rendre le graphique responsive
        plugins: {
            legend: {
                position: 'top',
            },
        },
        aspectRatio: 2,  // Ajuste le ratio largeur/hauteur (plus petit que 2 pour un graphique plus compact)
    }
});
  </script>
  {% if messages %}
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      {% for message in messages %}
        Swal.fire({
          {% if message.tags == 'success' %}
          icon: 'success',
          title: 'Succès',
          {% else %}
          icon: 'error',
          title: 'Erreur',
          {% endif %}
          text: "{{ message|escapejs }}",
          showConfirmButton: true,  // Affiche le bouton "OK"
          confirmButtonText: 'OK',  // Texte du bouton
          confirmButtonColor: '#3085d6' // Personnaliser la couleur du bouton si tu veux
        });
      {% endfor %}
    });
  </script>
{% endif %}
  </body>
</html>

